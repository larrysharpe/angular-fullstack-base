div(ng-include='"app/Components/navbar/navbar.html"')
.container
  .row
    h1 Settings
    .col-md-1
      h3 Nav
      ul.list-unstyled
        li(ng-repeat="item in menu")
          a(ng-click="changeView(item.view)" href="") {{item.text}}
    .col-md-11
      .row
        .col-sm-12
          div(ng-if="view === 'email'")
            h1 Change Email
            form.form(name='emailForm', ng-submit='changeEmail(emailForm)', novalidate='')
              .form-group
                input.form-control(type='email', name='email', ng-model='user.email', required='')
                p.text-danger
                  span &nbsp;
                  span(ng-show='(emailForm.email.$error.minlength || emailForm.email.$error.required) && (emailForm.email.$dirty || submitted)') Email must be at least 3 characters.
                  span(ng-show='emailForm.email.$error.mongoose') {{ errors.email }}
                p.help-block  {{ message }}

                label
                  input(type="checkbox" ng-model="newUser.validationNeeded")
                  | Require Email Validation

              button.btn.btn-lg.btn-primary(type='submit') Save changes
            hr
          div(ng-if="view === 'username'")
            h1 Change Username
            form.form(name='usernameForm', ng-submit='changeUsername(usernameForm)', novalidate='')
              .form-group
              input.form-control(type='text', name='username', ng-model='user.username', ng-minlength='3', required='')
              p.text-danger
                span &nbsp;
                span(ng-show='(usernameForm.username.$error.minlength || usernameForm.username.$error.required) && (usernameForm.username.$dirty || submitted)') Username must be at least 3 characters.
                span(ng-show='usernameForm.username.$error.mongoose') {{ errors.username }}
              p.help-block  {{ message }}
              button.btn.btn-lg.btn-primary(type='submit') Save changes
            hr
          div(ng-if="view === 'password'")
            h1 Change Password
            form.form(name='changePasswordForm', ng-submit='changePassword(changePasswordForm)', novalidate='')
              .form-group
                label Current Password
                input.form-control(type='password', name='password', ng-model='user.oldPassword', mongoose-error='')
                p.help-block(ng-show='form.password.$error.mongoose')
                  | {{ errors.other }}
              .form-group
                label New Password
                input.form-control(type='password', name='newPassword', ng-model='user.newPassword', ng-minlength='3', required='')
                p.help-block(ng-show='(form.newPassword.$error.minlength || form.newPassword.$error.required) && (form.newPassword.$dirty || submitted)')
                  | Password must be at least 3 characters.
              p.help-block  {{ message }}
              button.btn.btn-lg.btn-primary(type='submit') Save changes
            hr
          div(ng-if="view === 'identity'")
            h1 Your Identity
              sup
                small (required for broadcasters)
            p.text-danger
              strong NOTE:
              |  Changing Identity Information Will Automatically Suspend Your Broadcaster Account Until The Information Is Verified.
            form.form(name='changeIdentityForm', ng-submit='changeIdentity(changeIdentityForm)', novalidate='')
              .form-group
                h3 Name
                .row
                  .col-md-2
                    input.form-control(type='text', name='prefix', ng-model='user.name.prefix', mongoose-error='', placeholder='Prefix')
                    p.help-block(ng-show='form.prefix.$error.mongoose')
                      | {{ errors.other }}
                  .col-md-3
                    input.form-control(type='text', name='fname', ng-model='user.name.first', mongoose-error='', placeholder='First Name')
                    p.help-block(ng-show='form.fname.$error.mongoose')
                      | {{ errors.other }}
                  .col-md-2
                    input.form-control(type='text', name='mname', ng-model='user.name.middle', mongoose-error='', placeholder='Middle Name')
                    p.help-block(ng-show='form.mname.$error.mongoose')
                      | {{ errors.other }}
                  .col-md-3
                    input.form-control(type='text', name='lname', ng-model='user.name.last', mongoose-error='', placeholder='Last Name')
                    p.help-block(ng-show='form.lname.$error.mongoose')
                      | {{ errors.other }}
                  .col-md-2
                    input.form-control(type='text', name='suffix', ng-model='user.name.suffix', mongoose-error='', placeholder='Suffix')
                    p.help-block(ng-show='form.suffix.$error.mongoose')
                      | {{ errors.other }}
                .row
                  .col-sm-2
                    h3 Gender
                    select(
                    ng-options="option.value as option.text for option in genders"
                    ng-model="user.gender")
                  .col-sm-3
                    h3 Birthdate
                    .control
                      input#date-birth.form-control(type='date', ng-model='user.birthdate')
                  .col-sm-4
                    h3 Are You A U.S. Citizen?
                    select(
                    ng-options="option.value as option.text for option in yesNo"
                    ng-model="user.isUSCitizen")
              button.btn.btn-lg.btn-primary(type='submit') Save changes
          div(ng-if="view === 'roles'")
            form.form(name='changeRolesForm', ng-submit='changeRoles(changeRolesForm)', novalidate='')
              .form-group
                h1 User Roles
                .row
                  .col-xs-2(ng-repeat="role in userRoles")
                    label
                      input(type="checkbox", checklist-model="newUser.roles", checklist-value="role")
                      | {{role}}
                button.btn.btn-lg.btn-primary(type='submit') Save changes
